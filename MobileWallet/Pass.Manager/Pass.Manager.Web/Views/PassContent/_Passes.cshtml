@model PassContentListViewModel

@(Html.ActionLinkExt<PassContentController>(a => a.CreatePass(0), "Add New", new { passProjectId = Model.PassProjectId }, new { @class = "btn btn-default" }))
@Html.DropDownListForExt(m => m.PassContentTemplateId, Model.PassContentTemplates, "- Select Pass Templete -")

<script>
    function PassContentFilter() {
        return { PassContentTemplateId: $("#PassContentTemplateId").val() };
    }
</script>

@(Html.Grid<PassContentViewModel>()
    .Name("grdPassContent")
    .CssClass("pm-grid")
    .Pageable()
    .AutoBind(false)
    .DataSource(ds => ds.Read(Url.Action<PassContentController>(a => a.GridSearch(null, null))).Data("PassContentFilter"))
    .Columns(c =>
    {
        c.BoundLink(m => m.PassContentId, Url.Action<PassContentController>(a => a.Edit(0)), m => m.PassContentId).Title("ID").Width("100px");
        c.Bound(m => m.PassContentTemplateId).Title("Template");
        c.Bound(m => m.SerialNumber).Title("Serial Number");
        c.BoundEnum(m => m.Status);
        c.Bound(p => p.PassContentId).Title("Action").GridAjaxAction("Delete", Url.Action<PassContentController>(a => a.Delete(0)));
    }))

<script type="text/javascript">
    $(document).ready(function() {
        var grid = $("#grdPassContent");
        window.grid.Init(grid);
        window.grid.Reload(grid);

        $("#PassContentTemplateId").change(function () {
            window.grid.Reload($("#grdPassContent"));
        });
    });

</script>


